(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{107:function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(34),o=n.n(i);function a(){var t=u(["\n          ",'\n          <hr class="dotted">\n          ']);return a=function(){return t},t}function s(){var t=u(["\n\n<style>\n  :host {\n    display: block;\n  }\n  ",'\n</style>\n<div class="collections container bg-light top">\n  ','\n  <hr class="mb-0">\n  <div class="body flex">\n    <div class="col-facets mt-3">\n      ','\n    </div>\n    <div class="col-main">\n      <div ?hidden="','" class="flex align-items-center justify-content-center">\n        <div class="loading1">loading</div>\n      </div>\n      <div ?hidden="','" class="flex align-items-center justify-content-center">\n        <rp-alert>Error loading people.</rp-alert>\n      </div>\n      <div class="data" ?hidden="','">\n        ',"\n        ","\n      </div>\n\n    </div>\n  </div>\n\n</div>\n"]);return s=function(){return t},t}function u(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function c(){var t=this;return Object(r.b)(s(),o.a,this._renderBrowseHeader("People"),this._renderFacets(),"error"==this.dataStatus||"loaded"==this.dataStatus,"loading"==this.dataStatus||"loaded"==this.dataStatus,"loading"==this.dataStatus||"error"==this.dataStatus,this.data.map((function(e){return Object(r.b)(a(),t._renderAssetPreview(e))})),this._renderPagination(this.dataTotal))}n(101),n(92),n(102),n(98),n(91),n(103);function l(){var t=S(['\n    <rp-pagination max-page="','"\n                   current-page="','"\n                   @changed-page="','"\n                   class="mt-3"\n    ></rp-pagination>\n    ']);return l=function(){return t},t}function f(){var t=S([""]);return f=function(){return t},t}function p(){var t=S([""]);return p=function(){return t},t}function d(){var t=S(['\n      <rp-organization-preview .data="','" class="my-3"></rp-organization-preview>\n      ']);return d=function(){return t},t}function h(){var t=S(['\n      <rp-work-preview .data="','" class="my-3"></rp-work-preview>\n      ']);return h=function(){return t},t}function y(){var t=S(['\n      <rp-person-preview\n        name="','"\n        href="','"\n        title=','\n        text-width="','"\n        class="my-3">\n      </rp-person-preview>\n      ']);return y=function(){return t},t}function b(){var t=S(["\n    <rp-link-list\n      has-header-link\n      .links='","'\n      current-link='","'\n      >\n    </rp-link-list>\n    "]);return b=function(){return t},t}function v(){var t=S([""]);return v=function(){return t},t}function g(){var t=S([""]);return g=function(){return t},t}function m(){var t=S(['\n        <rp-a-z selected-letter="','"\n                .disabledLetters="','"\n                @changed-letter=',">\n        </rp-a-z>\n      "]);return m=function(){return t},t}function w(){var t=S(['\n    <div class="header flex align-items-center">\n      <div class="col-facets">\n        <h1>','</h1>\n      </div>\n      <div class="col-main">\n      ',"\n\n      </div>\n    </div>\n    "]);return w=function(){return t},t}function S(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){j(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=z(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(t){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function P(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){F(o,r,i,a,s,"next",t)}function s(t){F(o,r,i,a,s,"throw",t)}a(void 0)}))}}function A(t){return function(t){if(Array.isArray(t))return R(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||z(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){if(t){if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function C(t,e,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function M(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=I(t);if(e){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T(this,n)}}function T(t,e){return!e||"object"!==x(e)&&"function"!=typeof e?D(t):e}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(a,t);var e,n,i,o=E(a);function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this))._injectModel("CollectionModel","AppStateModel"),t.azOptions=new Set(["all"].concat(A("abcdefghijklmnopqrstuvwxyz"))),t.hasPagination=!1,t.visible=!1,t.urlQuery={},t.jsonldContext=APP_CONFIG.data.jsonldContext,t._resetQueryProperties(),t.setPeopleWidth(window.innerWidth),t._handleResize=t._handleResize.bind(D(t)),t}return M(a,null,[{key:"properties",get:function(){return{hasAz:{type:Boolean},hasPagination:{type:Boolean},azSelected:{type:String},azStatus:{type:String},azDisabled:{type:Array},azOptions:{type:Set},urlQuery:{type:Object},jsonldContext:{type:String},peopleWidth:{type:Number},visible:{type:Boolean},currentQuery:{type:Object},mainFacet:{type:String},mainFacets:{type:Array},pgPer:{type:Number},pgCurrent:{type:Number},textQuery:{type:String},dataFilters:{type:Array},data:{type:Array},dataStatus:{type:String},dataTotal:{type:Number},mainFacetIndex:{type:Number},subFacet:{type:String},subFacetIndex:{type:Number},subFacetStatus:{type:String}}}}]),M(a,[{key:"_resetQueryProperties",value:function(){this.data=[],this.dataStatus="loading",this.dataTotal=0,this.currentQuery={},this.dataFilters=[],this.pgPer=8,this.pgCurrent=1,this.mainFacet="none",this.mainFacets=[],this.mainFacetIndex=0,this.subFacet="none",this.subFacetIndex=0,this.subFacets=[],this.subFacetStatus="loading",this.textQuery="",this.hasAz=!1,this.azSelected="All",this.azDisabled=[],this.azStatus="loading"}},{key:"updated",value:function(t){this.doUpdated(t)}},{key:"doUpdated",value:function(t){var e=this;t.has("visible")&&this.visible&&requestAnimationFrame((function(){return e._handleResize()}))}},{key:"connectedCallback",value:function(){C(I(a.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this._handleResize)}},{key:"disconnectedCallback",value:function(){window.removeEventListener("resize",this._handleResize),C(I(a.prototype),"disconnectedCallback",this).call(this)}},{key:"_doMainQuery",value:(i=P(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.currentQuery,t.next=3,this.CollectionModel.query(e);case 3:if(n=t.sent,r=!1,this.textQuery&&"none"==this.mainFacet&&"none"==this.subFacet&&(this.subFacetStatus=n.state,r=!0),this.dataStatus=n.state,"loaded"==n.state){t.next=9;break}return t.abrupt("return");case 9:"object"===x(n.payload.total)?this.dataTotal=0:this.dataTotal=n.payload.total,r?(this.CollectionModel.store.setSearchAggsLoaded(this.textQuery,n.payload),this.mainFacets=this.CollectionModel._getMainFacets(n.payload,this.currentQuery),this.subFacets=this.CollectionModel._getSubFacets(this.mainFacet,n.payload,this.currentQuery)):this.hasAz=!0,this.data=n.payload.results,console.log("main query result:",n);case 13:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"_getSearchAggs",value:(n=P(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.textQuery){t.next=2;break}return t.abrupt("return");case 2:if("none"!=this.mainFacet||"none"!=this.subFacet){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,this.CollectionModel.searchAggQuery(this.textQuery,this.mainFacet);case 6:if(e=t.sent,this.subFacetStatus=e.state,"loaded"==e.state){t.next=10;break}return t.abrupt("return");case 10:this.mainFacets=this.CollectionModel._getMainFacets(e.payload,this.currentQuery),this.subFacets=this.CollectionModel._getSubFacets(this.mainFacet,e.payload,this.currentQuery);case 12:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"_getAzAgg",value:(e=P(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.CollectionModel.azAggQuery(this.currentQuery.mainFacet,this.currentQuery.subFacet);case 2:if(e=t.sent,this.azStatus=e.state,"loaded"==e.state){t.next=6;break}return t.abrupt("return");case 6:(n=this.CollectionModel.getAzBaseFilter(this.currentQuery.mainFacet))&&n.key?this.azDisabled=A(this._setDifference(this.azOptions,Object.keys(e.payload.aggregations.facets[n.key]))).filter((function(t){return"all"!=t})):this.azStatus="error",console.log("az for ".concat(this.currentQuery.mainFacet,", ").concat(this.currentQuery.subFacet),e);case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"_parseUrlQuery",value:function(t){t||(t=this.AppStateModel.store.data);var e=t.location.path,n=t.location.query;if(this._resetQueryProperties(),!(e.length<1)){var r="";r="search"==e[0]&&e.length>1?e[1].toLowerCase():e[0].toLowerCase();var i,o=k(this.CollectionModel.mainFacets);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(r==a.id.toLowerCase()){this.mainFacet=r,this.dataFilters.push(a.baseFilter);break}}}catch(t){o.e(t)}finally{o.f()}var s="";if("search"==e[0]&&e.length>2?s=e[2].toLowerCase():"search"!=e[0]&&e.length>1&&(s=e[1].toLowerCase()),this.CollectionModel.subFacets[this.mainFacet]){var u,c=1,l=k(this.CollectionModel.subFacets[this.mainFacet]);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(f.id==s){this.subFacet=s,this.subFacetIndex=c,this.dataFilters.push(f.baseFilter);break}c+=1}}catch(t){l.e(t)}finally{l.f()}}for(var p in n)"s"==p?this.textQuery=n.s:"filters"==p||("page"!=p||isNaN(n[p])?"az"==p&&this.azOptions.has(n[p])&&(this.azSelected=n[p]):this.pgCurrent=n[p]);this.currentQuery=this._constructQuery(),console.log("element query:",this.currentQuery)}}},{key:"_constructQuery",value:function(){var t={};return this.textQuery&&(t.textQuery=this.textQuery),this.pgCurrent&&(t.pgCurrent=this.pgCurrent),this.pgPer&&(t.pgPer=this.pgPer),this.azSelected&&(t.azSelected=this.azSelected),this.dataFilters&&(t.filters=this.dataFilters),this.mainFacet&&"none"!=this.mainFacet&&(t.mainFacet=this.mainFacet),this.subFacet&&"none"!=this.subFacet&&(t.subFacet=this.subFacet),t}},{key:"_handleResize",value:function(){if(this.visible){var t=window.innerWidth;this.setPeopleWidth(t)}}},{key:"setPeopleWidth",value:function(t){var e;e=.7*(t-30)-82-40,this.peopleWidth=Math.floor(e)}},{key:"_onUserAction",value:function(t){if(t){var e="",n=_({},this.currentQuery);"pagination"==t&&this.hasPagination?(n.pgCurrent=arguments.length<=1?void 0:arguments[1],e=this.CollectionModel.constructUrl(n)):"az"==t&&(n.azSelected=arguments.length<=1?void 0:arguments[1],e=this.CollectionModel.constructUrl(n,["page"])),e&&this.AppStateModel.setLocation(e)}}},{key:"_setDifference",value:function(t,e){var n,r=new Set(t),i=k(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;r.delete(o)}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"_getAssetType",value:function(t){if(t["@type"]&&("string"==typeof t["@type"]&&(t["@type"]=[t["@type"]]),Array.isArray(t["@type"])))return t["@type"].includes(this.jsonldContext+":person")?"person":t["@type"].includes(this.jsonldContext+":publication")?"work":t["@type"].includes(this.jsonldContext+":organization")?"organization":void 0}},{key:"_urlEncode",value:function(t){var e=[];for(var n in t)if(t.hasOwnProperty(n)){if("offset"==n&&0==t[n])continue;if("filters"==n&&0==Object.keys(t[n]).length)continue;if("limit"==n)continue;e.push(encodeURIComponent(n)+"="+encodeURIComponent(JSON.stringify(t[n])))}return e.length?"?"+e.join("&"):""}},{key:"_renderBrowseHeader",value:function(t,e){var n=this;return this.hasAz=!0,e&&(this.azSelected=e),Object(r.b)(w(),t,this.hasAz?Object(r.b)(m(),this.azSelected,this.azDisabled,(function(t){return n._onUserAction("az",t.target.selectedLetter)})):Object(r.b)(g()))}},{key:"_renderFacets",value:function(){return this.subFacets?Object(r.b)(b(),this.subFacets,this.subFacetIndex):Object(r.b)(v())}},{key:"_renderAssetPreview",value:function(t){var e=this._getAssetType(t);if("person"==e){var n=this.CollectionModel._formatPerson(t);return Object(r.b)(y(),n.name,"/individual/"+n.id,n.title,this.peopleWidth)}return"work"==e?Object(r.b)(h(),t):"organization"==e?Object(r.b)(d(),t):Object(r.b)(p())}},{key:"_renderPagination",value:function(t){var e=this;if(!t)return Object(r.b)(f());this.hasPagination=!0;var n=Math.ceil(t/this.pgPer);return Object(r.b)(l(),n,this.pgCurrent,(function(t){return e._onUserAction("pagination",t.target.currentPage)}))}}]),a}(Mixin(r.a).with(LitCorkUtils));customElements.define("rp-utils-collection",L);n(90);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function W(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){q(o,r,i,a,s,"next",t)}function s(t){q(o,r,i,a,s,"throw",t)}a(void 0)}))}}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e,n){return e&&B(t.prototype,e),n&&B(t,n),t}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=V(t);if(e){var i=V(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return G(this,n)}}function G(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?K(t):e}function K(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(o,t);var e,n,r,i=$(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).render=c.bind(K(t)),t.AppStateModel.get().then((function(e){return t._onAppStateUpdate(e)})),t}return H(o,null,[{key:"properties",get:function(){return{}}}]),H(o,[{key:"_onAppStateUpdate",value:(r=W(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:requestAnimationFrame((function(){return n.doUpdate(e)}));case 1:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"doUpdate",value:(n=W(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateComplete;case 2:if(this.visible){t.next=4;break}return t.abrupt("return");case 4:return this._parseUrlQuery(e),t.next=7,Promise.all([this._doMainQuery(),this._getFacets(),this._getAzAgg()]);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"_getFacets",value:(e=W(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.CollectionModel.overview("peopleAggs");case 3:if(e=t.sent,this.subFacetStatus=e.state,"loaded"==e.state){t.next=7;break}return t.abrupt("return");case 7:console.log("peopleaggs",e),this.subFacets=this.CollectionModel._getSubFacets("people",e.payload,this.currentQuery);case 9:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),o}(L);function Y(){var t=tt(["\n          ",'\n          <hr class="dotted">\n          ']);return Y=function(){return t},t}function Z(){var t=tt(["\n\n<style>\n  :host {\n    display: block;\n  }\n  ",'\n</style>\n<div class="collections works container bg-light top">\n  ','\n  <hr class="mb-0">\n  <div class="body flex">\n    <div class="col-facets mt-3">\n      ','\n    </div>\n    <div class="col-main">\n      <div ?hidden="','" class="flex align-items-center justify-content-center">\n        <div class="loading1">loading</div>\n      </div>\n      <div ?hidden="','" class="flex align-items-center justify-content-center">\n        <rp-alert>Error loading works.</rp-alert>\n      </div>\n      <div class="data" ?hidden="','">\n        ',"\n        ","\n      </div>\n\n    </div>\n  </div>\n\n</div>\n"]);return Z=function(){return t},t}function tt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function et(){var t=this;return Object(r.b)(Z(),o.a,this._renderBrowseHeader("Works"),this._renderFacets(),"error"==this.dataStatus||"loaded"==this.dataStatus,"loading"==this.dataStatus||"loaded"==this.dataStatus,"loading"==this.dataStatus||"error"==this.dataStatus,this.data.map((function(e){return Object(r.b)(Y(),t._renderAssetPreview(e))})),this._renderPagination(this.dataTotal))}function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rt(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function it(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){rt(o,r,i,a,s,"next",t)}function s(t){rt(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e,n){return e&&ot(t.prototype,e),n&&ot(t,n),t}function st(t,e){return(st=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ft(t);if(e){var i=ft(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(t,e){return!e||"object"!==nt(e)&&"function"!=typeof e?lt(t):e}function lt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ft(t){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}customElements.define("rp-page-people",X);var pt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&st(t,e)}(o,t);var e,n,r,i=ut(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).render=et.bind(lt(t)),t.AppStateModel.get().then((function(e){return t._onAppStateUpdate(e)})),t}return at(o,null,[{key:"properties",get:function(){return{}}}]),at(o,[{key:"_onAppStateUpdate",value:(r=it(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:requestAnimationFrame((function(){return n.doUpdate(e)}));case 1:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"doUpdate",value:(n=it(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateComplete;case 2:if(this.visible){t.next=4;break}return t.abrupt("return");case 4:return this._parseUrlQuery(e),t.next=7,Promise.all([this._doMainQuery(),this._getFacets(),this._getAzAgg()]);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"_getFacets",value:(e=it(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.CollectionModel.overview("worksAggs");case 3:if(e=t.sent,this.subFacetStatus=e.state,"loaded"==e.state){t.next=7;break}return t.abrupt("return");case 7:this.subFacets=this.CollectionModel._getSubFacets("works",e.payload,this.currentQuery);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),o}(L);function dt(){var t=yt(["\n          ",'\n          <hr class="dotted">\n          ']);return dt=function(){return t},t}function ht(){var t=yt(["\n\n<style>\n  :host {\n    display: block;\n  }\n  ",'\n</style>\n<div class="collections organizations container bg-light top">\n  ','\n  <hr class="mb-0">\n  <div class="body flex">\n    <div class="col-facets mt-3">\n      ','\n    </div>\n    <div class="col-main">\n      <div ?hidden="','" class="flex align-items-center justify-content-center">\n        <div class="loading1">loading</div>\n      </div>\n      <div ?hidden="','" class="flex align-items-center justify-content-center">\n        <rp-alert>Error loading organizations.</rp-alert>\n      </div>\n      <div class="data" ?hidden="','">\n        ',"\n        ","\n      </div>\n\n    </div>\n  </div>\n\n</div>\n"]);return ht=function(){return t},t}function yt(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function bt(){var t=this;return Object(r.b)(ht(),o.a,this._renderBrowseHeader("Organizations"),this._renderFacets(),"error"==this.dataStatus||"loaded"==this.dataStatus,"loading"==this.dataStatus||"loaded"==this.dataStatus,"loading"==this.dataStatus||"error"==this.dataStatus,this.data.map((function(e){return Object(r.b)(dt(),t._renderAssetPreview(e))})),this._renderPagination(this.dataTotal))}function vt(t){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function mt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){gt(o,r,i,a,s,"next",t)}function s(t){gt(o,r,i,a,s,"throw",t)}a(void 0)}))}}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(t,e,n){return e&&wt(t.prototype,e),n&&wt(t,n),t}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xt(t);if(e){var i=xt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return jt(this,n)}}function jt(t,e){return!e||"object"!==vt(e)&&"function"!=typeof e?kt(t):e}function kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}customElements.define("rp-page-works",pt);var Ft=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(o,t);var e,n,r,i=_t(o);function o(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this)).render=bt.bind(kt(t)),t.AppStateModel.get().then((function(e){return t._onAppStateUpdate(e)})),t}return St(o,null,[{key:"properties",get:function(){return{}}}]),St(o,[{key:"_onAppStateUpdate",value:(r=mt(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:requestAnimationFrame((function(){return n.doUpdate(e)}));case 1:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})},{key:"doUpdate",value:(n=mt(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateComplete;case 2:if(this.visible){t.next=4;break}return t.abrupt("return");case 4:return this._parseUrlQuery(e),t.next=7,Promise.all([this._doMainQuery(),this._getFacets(),this._getAzAgg()]);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"_getFacets",value:(e=mt(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.CollectionModel.overview("organizationsAggs");case 3:if(e=t.sent,this.subFacetStatus=e.state,"loaded"==e.state){t.next=7;break}return t.abrupt("return");case 7:this.subFacets=this.CollectionModel._getSubFacets("organizations",e.payload,this.currentQuery);case 8:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),o}(L);function Pt(){var t=Ct([""]);return Pt=function(){return t},t}function At(){var t=Ct(['\n      <div class="flex align-items-center justify-content-center" style="height:100%;">No search results found!</div>\n      ']);return At=function(){return t},t}function zt(){var t=Ct(["\n        ",'\n        <hr class="dotted">\n        ']);return zt=function(){return t},t}function Rt(){var t=Ct(["\n\n<style>\n  :host {\n    display: block;\n  }\n  ",'\n</style>\n<div class="search-header container bg-light top">\n  <div class="px-5 py-3 bg-primary text-light"><h1 class="weight-regular">Search results for <span class="text-secondary bold">','</span></h1></div>\n  <rp-link-list class="bg-light p-3"\n                direction="horizontal"\n                current-link="','"\n                .links="','">\n  </rp-link-list>\n</div>\n<div class="search container bg-light mt-3 pb-3">\n<div class="body flex">\n  <div class="col-facets mt-3">\n    ','\n  </div>\n  <div class="col-main">\n    <div ?hidden="','" class="flex align-items-center justify-content-center">\n      <div class="loading1">loading</div>\n    </div>\n    <div ?hidden="','" class="flex align-items-center justify-content-center">\n      <rp-alert>Error loading search results.</rp-alert>\n    </div>\n    <div class="data" ?hidden="','">\n      ',"\n      ","\n      ","\n    </div>\n\n  </div>\n</div>\n</div>\n\n"]);return Rt=function(){return t},t}function Ct(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function Qt(){var t=this;return Object(r.b)(Rt(),o.a,this.textQuery,this.mainFacetIndex,this.mainFacets,this._renderFacets(),"error"==this.dataStatus||"loaded"==this.dataStatus,"loading"==this.dataStatus||"loaded"==this.dataStatus,"loading"==this.dataStatus||"error"==this.dataStatus,this.data.map((function(e){return Object(r.b)(zt(),t._renderAssetPreview(e))})),0==this.data.length?Object(r.b)(At()):Object(r.b)(Pt()),this._renderPagination(this.dataTotal))}function Mt(t){return(Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Et(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Ut(o,r,i,a,s,"next",t)}function s(t){Ut(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Tt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e,n){return e&&It(t.prototype,e),n&&It(t,n),t}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ht(t);if(e){var i=Ht(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Wt(this,n)}}function Wt(t,e){return!e||"object"!==Mt(e)&&"function"!=typeof e?Bt(t):e}function Bt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}customElements.define("rp-page-organizations",Ft);var Jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(i,t);var e,n,r=qt(i);function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this)).render=Qt.bind(Bt(t)),t.AppStateModel.get().then((function(e){return t._onAppStateUpdate(e)})),t}return Lt(i,null,[{key:"properties",get:function(){return{}}}]),Lt(i,[{key:"updated",value:function(t){if(this.doUpdated(t),t.has("mainFacet")&&"none"!=this.mainFacet){var e,n=!1,r=0,i=Tt(this.CollectionModel.mainFacets);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(r++,o.id.toLowerCase()==this.mainFacet.toLowerCase()){n=!0,this.mainFacetIndex=r;break}}}catch(t){i.e(t)}finally{i.f()}n||(this.mainFacet="none",this.mainFacetIndex=0)}}},{key:"_onAppStateUpdate",value:(n=Et(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:requestAnimationFrame((function(){return n.doUpdate(e)}));case 1:case"end":return t.stop()}}),t)}))),function(t){return n.apply(this,arguments)})},{key:"doUpdate",value:(e=Et(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.updateComplete;case 2:if(this.visible){t.next=4;break}return t.abrupt("return");case 4:return this._parseUrlQuery(e),t.next=7,Promise.all([this._doMainQuery(),this._getSearchAggs()]);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),i}(L);customElements.define("rp-page-search",Jt)}}]);